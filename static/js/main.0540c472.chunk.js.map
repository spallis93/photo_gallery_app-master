{"version":3,"sources":["components/Header.js","actions/errors.js","actions/photos.js","components/UploadForm.js","utils/constants.js","components/HomePage.js","components/Photo.js","components/Gallary.js","components/NotFoundPage.js","router/AppRouter.js","reducers/photos.js","reducers/errors.js","store/store.js","index.js"],"names":["Header","className","to","getErrors","errors","type","loadPhotos","photos","connect","state","dispatch","useState","photo","setPhoto","isSubmitted","setIsSubmitted","errorMsg","setErroMsg","useEffect","Fragment","upload_error","Form","onSubmit","event","preventDefault","a","formData","FormData","append","axios","post","headers","response","data","beginAddPhoto","method","encType","Group","Label","Control","name","onChange","file","target","files","Button","variant","disabled","HomePage","Photo","id","Card","Img","src","alt","isLoading","setIsLoading","get","length","get_error","map","key","_id","NotFoundPage","AppRouter","component","path","exact","Gallary","photosReducer","action","errorsReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","applyMiddleware","thunk","subscribe","console","log","getState","ReactDOM","render","document","getElementById"],"mappings":"iPAiBeA,EAdA,kBACb,gCACE,iDACA,yBAAKC,UAAU,SACb,kBAAC,IAAD,CAASC,GAAG,IAAID,UAAU,QAA1B,QAGA,kBAAC,IAAD,CAASC,GAAG,WAAWD,UAAU,QAAjC,c,kECVOE,EAAY,SAACC,GAAD,MAAa,CACpCC,KAAM,aACND,WC6BWE,EAAa,SAACC,GAAD,MAAa,CACrCF,KAAM,cACNE,WCsCaC,eALS,SAACC,GAAD,MAAY,CAClCF,OAAQE,EAAMF,QAAU,GACxBH,OAAQK,EAAML,QAAU,MAGXI,EAlEI,SAAC,GAA0B,IAAxBJ,EAAuB,EAAvBA,OAAQM,EAAe,EAAfA,SAAe,EACjBC,mBAAS,MADQ,mBACpCC,EADoC,KAC7BC,EAD6B,OAELF,oBAAS,GAFJ,mBAEpCG,EAFoC,KAEvBC,EAFuB,OAGZJ,mBAAS,MAHG,mBAGpCK,EAHoC,KAG1BC,EAH0B,KAK3CC,qBAAU,WACRD,EAAWb,KACV,CAACA,IAEJc,qBAAU,WACRD,EAAW,MACV,IAgBH,OACE,kBAAC,IAAME,SAAP,KACGH,GAAYA,EAASI,aACpB,uBAAGnB,UAAU,6BAA6Be,EAASI,cAEnDN,GACE,uBAAGb,UAAU,+BAAb,gCAKJ,kBAACoB,EAAA,EAAD,CACEC,SArBmB,SAACC,GACxBA,EAAMC,iBACFZ,IACFK,EAAW,IACXP,EDvBuB,SAACE,GAC5B,8CAAO,WAAOF,GAAP,eAAAe,EAAA,uEAEGC,EAAW,IAAIC,UACZC,OAAO,QAAShB,GAHtB,SAIGiB,IAAMC,KAAN,UERgB,GFQhB,WAAqCJ,EAAU,CACnDK,QAAS,CACP,eAAgB,yBANjB,uDAUH,KAAMC,UAAYtB,EAASP,EAAU,KAAM6B,SAASC,OAVjD,yDAAP,sDCsBaC,CAActB,IACvBG,GAAe,KAiBboB,OAAO,OACPC,QAAQ,sBACRnC,UAAU,eAEV,kBAACoB,EAAA,EAAKgB,MAAN,KACE,kBAAChB,EAAA,EAAKiB,MAAN,+BACA,kBAACjB,EAAA,EAAKkB,QAAN,CAAclC,KAAK,OAAOmC,KAAK,QAAQC,SAjCxB,SAAClB,GACtB,IAAMmB,EAAOnB,EAAMoB,OAAOC,MAAM,GAChC/B,EAAS6B,OAiCL,kBAACG,EAAA,EAAD,CACEC,QAAQ,UACRzC,KAAK,SACLJ,UAAS,UAAMW,EAAgC,aAAxB,uBACvBmC,UAAUnC,GAJZ,eE5COoC,EANE,kBACf,yBAAK/C,UAAU,aACb,kBAAC,EAAD,Q,QCUWgD,EAZD,SAAC,GAAY,IAAVC,EAAS,EAATA,GACf,OACE,kBAACC,EAAA,EAAD,CAAMlD,UAAU,SACd,kBAACkD,EAAA,EAAKC,IAAN,CACEN,QAAQ,MACRO,IAAG,uCAAkCH,GACrCI,IAAI,YC+BG9C,eALS,SAACC,GAAD,MAAY,CAClCF,OAAQE,EAAMF,QAAU,GACxBH,OAAQK,EAAML,QAAU,MAGXI,EAjCC,SAAC,GAAkC,IAAhCJ,EAA+B,EAA/BA,OAAQG,EAAuB,EAAvBA,OAAQG,EAAe,EAAfA,SAAe,EACdC,oBAAS,GADK,mBACzC4C,EADyC,KAC9BC,EAD8B,KAchD,OAXAtC,qBAAU,WACRsC,GAAa,GACb9C,ELSF,uCAAO,WAAOA,GAAP,eAAAe,EAAA,+EAEkBI,IAAM4B,IAAN,UEtBC,GFsBD,YAFlB,OAEGlD,EAFH,OAGHG,EAASJ,EAAWC,EAAO0B,OAHxB,gDAKH,KAAMD,UAAYtB,EAASP,EAAU,KAAM6B,SAASC,OALjD,yDAAP,yDKRG,IAEHf,qBAAU,WACJX,EAAOmD,OAAS,GAClBF,GAAa,KAEd,CAACjD,IAGF,yBAAKN,UAAU,eACZG,GAAUA,EAAOuD,WAChB,uBAAG1D,UAAU,6BAA6BG,EAAOuD,WAElDJ,EACC,yBAAKtD,UAAU,gCAAf,cAEAM,EAAOqD,KAAI,SAAChD,GAAD,OAAW,kBAAC,EAAD,CAAOiD,IAAKjD,EAAMkD,IAAKZ,GAAItC,EAAMkD,aCrBhDC,EANM,kBACnB,6BACE,gDCkBWC,EAfG,kBAChB,kBAAC,IAAD,KACE,6BACE,kBAAC,EAAD,MACA,yBAAK/D,UAAU,gBACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOgE,UAAWjB,EAAUkB,KAAK,IAAIC,OAAO,IAC5C,kBAAC,IAAD,CAAOF,UAAWG,EAASF,KAAK,aAChC,kBAAC,IAAD,CAAOD,UAAWF,S,QCNbM,EATO,WAAyB,IAAxB5D,EAAuB,uDAAf,GAAI6D,EAAW,uCAC5C,OAAQA,EAAOjE,MACb,IAAK,cACH,OAAOiE,EAAO/D,OAChB,QACE,OAAOE,ICIE8D,EATO,WAAyB,IAAxB9D,EAAuB,uDAAf,GAAI6D,EAAW,uCAC5C,OAAQA,EAAOjE,MACb,IAAK,aACH,OAAOiE,EAAOlE,OAChB,QACE,OAAOK,I,QCAP+D,EAAmBC,OAAOC,sCAAwCC,IAElEC,EAAQC,YACZC,YAAgB,CACdvE,OAAQ8D,EACRjE,OAAQmE,IAEVC,EAAiBO,YAAgBC,OAGnCJ,EAAMK,WAAU,WACdC,QAAQC,IAAIP,EAAMQ,eAGLR,Q,YCXfS,IAASC,OACP,kBAAC,IAAD,CAAUV,MAAOA,GACf,kBAAC,EAAD,OAEFW,SAASC,eAAe,W","file":"static/js/main.0540c472.chunk.js","sourcesContent":["import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst Header = () => (\n  <header>\n    <h1>Photo Gallery App</h1>\n    <div className=\"links\">\n      <NavLink to=\"/\" className=\"link\">\n        Home\n      </NavLink>\n      <NavLink to=\"/gallery\" className=\"link\">\n        Gallery\n      </NavLink>\n    </div>\n  </header>\n);\n\nexport default Header;\n","export const getErrors = (errors) => ({\n  type: 'GET_ERRORS',\n  errors\n});\n","import axios from 'axios';\nimport { BASE_API_URL } from '../utils/constants';\nimport { getErrors } from './errors';\n\nexport const beginAddPhoto = (photo) => {\n  return async (dispatch) => {\n    try {\n      const formData = new FormData();\n      formData.append('photo', photo);\n      await axios.post(`${BASE_API_URL}/photos`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    } catch (error) {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\nexport const startLoadPhotos = () => {\n  return async (dispatch) => {\n    try {\n      const photos = await axios.get(`${BASE_API_URL}/photos`);\n      dispatch(loadPhotos(photos.data));\n    } catch (error) {\n      error.response && dispatch(getErrors(error.response.data));\n    }\n  };\n};\n\nexport const loadPhotos = (photos) => ({\n  type: 'LOAD_PHOTOS',\n  photos\n});\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Button } from 'react-bootstrap';\nimport { beginAddPhoto } from '../actions/photos';\n\nconst UploadForm = ({ errors, dispatch }) => {\n  const [photo, setPhoto] = useState(null);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [errorMsg, setErroMsg] = useState(null);\n\n  useEffect(() => {\n    setErroMsg(errors);\n  }, [errors]);\n\n  useEffect(() => {\n    setErroMsg(''); // reset error message on page load\n  }, []);\n\n  const handleOnChange = (event) => {\n    const file = event.target.files[0];\n    setPhoto(file);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    if (photo) {\n      setErroMsg('');\n      dispatch(beginAddPhoto(photo));\n      setIsSubmitted(true);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      {errorMsg && errorMsg.upload_error ? (\n        <p className=\"errorMsg centered-message\">{errorMsg.upload_error}</p>\n      ) : (\n        isSubmitted && (\n          <p className=\"successMsg centered-message\">\n            Photo uploaded successfully.\n          </p>\n        )\n      )}\n      <Form\n        onSubmit={handleFormSubmit}\n        method=\"post\"\n        encType=\"multipart/form-data\"\n        className=\"upload-form\"\n      >\n        <Form.Group>\n          <Form.Label>Choose photo to upload</Form.Label>\n          <Form.Control type=\"file\" name=\"photo\" onChange={handleOnChange} />\n        </Form.Group>\n        <Button\n          variant=\"primary\"\n          type=\"submit\"\n          className={`${!photo ? 'disabled submit-btn' : 'submit-btn'}`}\n          disabled={photo ? false : true}\n        >\n          Upload\n        </Button>\n      </Form>\n    </React.Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  photos: state.photos || [],\n  errors: state.errors || {}\n});\n\nexport default connect(mapStateToProps)(UploadForm);\n","// export const BASE_API_URL = 'http://localhost:3300';\nexport const BASE_API_URL = '';\n","import React from 'react';\nimport UploadForm from './UploadForm';\n\nconst HomePage = () => (\n  <div className=\"home-page\">\n    <UploadForm />\n  </div>\n);\n\nexport default HomePage;\n","import React from 'react';\nimport { Card } from 'react-bootstrap';\n\nconst Photo = ({ id }) => {\n  return (\n    <Card className=\"photo\">\n      <Card.Img\n        variant=\"top\"\n        src={`http://localhost:3300/photos/${id}`}\n        alt=\"Photo\"\n      />\n    </Card>\n  );\n};\n\nexport default Photo;\n","/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { startLoadPhotos } from '../actions/photos';\nimport Photo from './Photo';\n\nconst Gallary = ({ errors, photos, dispatch }) => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    setIsLoading(true);\n    dispatch(startLoadPhotos());\n  }, []);\n\n  useEffect(() => {\n    if (photos.length > 0) {\n      setIsLoading(false);\n    }\n  }, [photos]);\n\n  return (\n    <div className=\"photos-list\">\n      {errors && errors.get_error && (\n        <p className=\"errorMsg centered-message\">{errors.get_error}</p>\n      )}\n      {isLoading ? (\n        <div className=\"loading-msg centered-message\">Loading...</div>\n      ) : (\n        photos.map((photo) => <Photo key={photo._id} id={photo._id} />)\n      )}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  photos: state.photos || [],\n  errors: state.errors || {}\n});\n\nexport default connect(mapStateToProps)(Gallary);\n","import React from 'react';\n\nconst NotFoundPage = () => (\n  <div>\n    <h3>Page not found</h3>\n  </div>\n);\n\nexport default NotFoundPage;\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Header from '../components/Header';\nimport HomePage from '../components/HomePage';\nimport Gallary from '../components/Gallary';\nimport NotFoundPage from '../components/NotFoundPage';\n\nconst AppRouter = () => (\n  <BrowserRouter>\n    <div>\n      <Header />\n      <div className=\"main-content\">\n        <Switch>\n          <Route component={HomePage} path=\"/\" exact={true} />\n          <Route component={Gallary} path=\"/gallery\" />\n          <Route component={NotFoundPage} />\n        </Switch>\n      </div>\n    </div>\n  </BrowserRouter>\n);\n\nexport default AppRouter;\n","const photosReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'LOAD_PHOTOS':\n      return action.photos;\n    default:\n      return state;\n  }\n};\n\nexport default photosReducer;\n","const errorsReducer = (state = {}, action) => {\n  switch (action.type) {\n    case 'GET_ERRORS':\n      return action.errors;\n    default:\n      return state;\n  }\n};\n\nexport default errorsReducer;\n","import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\nimport photosReducer from '../reducers/photos';\nimport errorsReducer from '../reducers/errors';\nimport thunk from 'redux-thunk';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  combineReducers({\n    photos: photosReducer,\n    errors: errorsReducer\n  }),\n  composeEnhancers(applyMiddleware(thunk))\n);\n\nstore.subscribe(() => {\n  console.log(store.getState());\n});\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport AppRouter from './router/AppRouter';\nimport store from './store/store';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './styles.scss';\n\nReactDOM.render(\n  <Provider store={store}>\n    <AppRouter />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}